(function($){var CPanel=function(DOMViewSelectors){var chartJS=new Array();var chartOptions={animation:true,scaleFontSize:11,scaleOverride:true,scaleSteps:1,scaleStepWidth:50};var chartData={};var context;function generateLineChart(elem,context,animation){var elemIndex=$(elem).attr("data-bind").replace(/([{}])/g,"");chartData={};if(!chartJS[elemIndex]){chartJS[elemIndex]=new Chart(context)}var maxValue=10;chartData.labels=new Array();chartData.datasets=new Array();var subDataSet=new Array();$.each(jrealtimeChartData[elemIndex],function(label,value){var labelSuffix=label.replace(/([A-Z])/g,"_$1").toUpperCase();chartData.labels[chartData.labels.length]=eval("COM_JREALTIME_"+labelSuffix+"_CHART");subDataSet[subDataSet.length]=parseInt(value);if(value>maxValue){maxValue=value}});var konstant=1;if(maxValue>100){konstant=10}if(maxValue>1000){konstant=80}if(maxValue>10000){konstant=500}if(maxValue>100000){konstant=5000}chartOptions.scaleStepWidth=parseInt((maxValue*konstant)/(maxValue/10));chartOptions.scaleSteps=parseInt((maxValue/chartOptions.scaleStepWidth)+1);chartData.datasets[0]={fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:subDataSet};chartOptions.animation=animation;chartJS[elemIndex].Line(chartData,chartOptions)}function generateMap(){$('div[data-bind="{jr-mapcharts}"]').vectorMap({map:"world_en",color:"#DEDEDE",hoverOpacity:0.7,selectedColor:"#666666",enableZoom:true,showTooltip:true,values:jrealtimeChartData.geomap,scaleColors:["#B4D6E6","#4B97BA"],normalizeFunction:"polynomial",onLabelShow:function(event,label,name,value){label.text(name+": "+value)}})}function resizeRepaintCanvas(canvas,context,animation){var subConstant=1;var currentWindowWidth=$(window).width();if(currentWindowWidth>730){subConstant=1.7}var containerWidth=$(canvas).parent().width()/subConstant;canvas.width=containerWidth;canvas.height=200;generateLineChart(canvas,context,animation)}(function __construct(){if(!!document.createElement("canvas").getContext){$.each(DOMViewSelectors,function(k,elem){context=$(elem).get(0).getContext("2d");var canvas=$(elem).get(0);$(window).on("resize",function(){resizeRepaintCanvas(canvas,context,false)});resizeRepaintCanvas(canvas,context,true)})}var siteSpeedApplication=new JRealtimeControllerSitespeed({container:"sitespeed_container",databind:"jr-sitespeed",targetURL:jrealtimeBaseURI});$("#execute_sitespeed_test").on("click",function(jqEvent){siteSpeedApplication.executeTest()});generateMap()}).call(this)};$(function(){window.JRealtimeCPanel=new CPanel(['*[data-bind="{chart_period_canvas}"]','*[data-bind="{chart_generic_canvas}"]'])})})(jQuery);